# Claude TriFlow çŠ¶æ€å“åº”å¼è‡ªåŠ¨åŒ–æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•

1. [æ¶æ„æ¦‚è¿°](#æ¶æ„æ¦‚è¿°)
2. [æ ¸å¿ƒè®¾è®¡ç†å¿µ](#æ ¸å¿ƒè®¾è®¡ç†å¿µ)
3. [è¯¦ç»†å·¥ä½œæµç¨‹](#è¯¦ç»†å·¥ä½œæµç¨‹)
4. [çŠ¶æ€è¯†åˆ«è§„åˆ™](#çŠ¶æ€è¯†åˆ«è§„åˆ™)
5. [é˜²å¡æœºåˆ¶](#é˜²å¡æœºåˆ¶)
6. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
7. [å¯åŠ¨æµç¨‹](#å¯åŠ¨æµç¨‹)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¶æ„æ¦‚è¿°

### ç³»ç»Ÿç»„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Brain (Claude Code) - çŠ¶æ€å“åº”å™¨                 â”‚
â”‚                                                  â”‚
â”‚ èŒè´£ï¼š                                           â”‚
â”‚ 1. è¯»å– tasks.md (ä¸€æ¬¡æ€§)                        â”‚
â”‚ 2. é€ä¸ªå‘é€ä»»åŠ¡ç»™ Worker                         â”‚
â”‚ 3. ç›‘æ§ Worker è¾“å‡ºå˜åŒ–                          â”‚
â”‚ 4. è¯†åˆ«çŠ¶æ€ (å…³é”®è¯ + Claude ç†è§£)               â”‚
â”‚ 5. åšå‡ºç®€å•å“åº” (/run, /clear, 1, y, continue)  â”‚
â”‚ 6. è®°å½•æ‰§è¡Œç»“æœ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ tmux send-keys        â†‘ tmux capture-pane
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker (Claude Code + TriFlow)                   â”‚
â”‚                                                  â”‚
â”‚ èŒè´£ï¼š                                           â”‚
â”‚ 1. æ¥æ”¶ /plan å‘½ä»¤                               â”‚
â”‚ 2. ä½¿ç”¨ TriFlow ç”Ÿæˆ todo.md                     â”‚
â”‚ 3. æ¥æ”¶ /run æ‰§è¡Œæ‰€æœ‰æ­¥éª¤                        â”‚
â”‚ 4. è¾“å‡ºæ‰§è¡Œè¿‡ç¨‹å’Œç»“æœ                            â”‚
â”‚ 5. ç­‰å¾… /clear æ¸…ç†ä¸Šä¸‹æ–‡                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®ç‰¹ç‚¹

- âœ… **ç®€å•å¯é **ï¼šåŸºäºçŠ¶æ€è¯†åˆ«ï¼Œä¸ä¾èµ–å¤æ‚é€»è¾‘
- âœ… **æ™ºèƒ½å“åº”**ï¼šå…³é”®è¯åŒ¹é… + Claude è¯­ä¹‰ç†è§£
- âœ… **é˜²å¡æœºåˆ¶**ï¼šå¤šå±‚é˜²æŠ¤ï¼Œç¡®ä¿ä¸ä¼šæ­»å¾ªç¯
- âœ… **æ˜“äºè°ƒè¯•**ï¼šæ¸…æ™°çš„çŠ¶æ€è½¬æ¢ï¼Œä¾¿äºè¿½è¸ª

---

## æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 1. Brain = çŠ¶æ€è¯†åˆ«å™¨ + å“åº”å™¨

Brain **ä¸éœ€è¦**ï¼š
- âŒ æŒç»­ç›‘æ§å¾ªç¯
- âŒ å¤æ‚çš„å¯¹è¯ç®¡ç†
- âŒ æ·±åº¦ç†è§£ä»»åŠ¡å†…å®¹

Brain **åªéœ€è¦**ï¼š
- âœ… æ£€æµ‹è¾“å‡ºæ˜¯å¦å˜åŒ–
- âœ… è¯†åˆ«å½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€
- âœ… å‘é€å¯¹åº”çš„ç®€å•å“åº”

### 2. æ··åˆå¼çŠ¶æ€è¯†åˆ«

```
ä¼˜å…ˆçº§ 1ï¼šå…³é”®è¯å¿«é€ŸåŒ¹é…
  "ready" â†’ PLAN_READY
  "complete" â†’ TASK_COMPLETE
  "(y/n)" â†’ YES_NO_QUESTION
  â†“ (åŒ¹é…å¤±è´¥)

ä¼˜å…ˆçº§ 2ï¼šClaude è¯­ä¹‰ç†è§£
  é˜…è¯»è¾“å‡ºå†…å®¹
  ç†è§£å½“å‰åœ¨é—®ä»€ä¹ˆ
  åšå‡ºåˆç†åˆ¤æ–­
```

### 3. é»˜è®¤ç­–ç•¥ä¼˜å…ˆ

é‡åˆ°äº¤äº’æ—¶ï¼Œä½¿ç”¨ä¿å®ˆçš„é»˜è®¤ç­–ç•¥ï¼š
- **(y/n)** â†’ é»˜è®¤é€‰ **y**
- **é€‰æ‹©é¢˜** â†’ é»˜è®¤é€‰ **1**
- **continue?** â†’ é»˜è®¤å‘é€ **continue**

### 4. è¾“å‡ºå˜åŒ–é©±åŠ¨

```
ä¸æ˜¯æ¯ç§’éƒ½æ£€æŸ¥ï¼Œè€Œæ˜¯ï¼š
  æ£€æµ‹åˆ°è¾“å‡ºå˜åŒ– â†’ ç«‹å³åˆ†æ
  è¾“å‡ºæ²¡å˜åŒ– â†’ ç­‰å¾…
  30ç§’éƒ½æ²¡å˜åŒ– â†’ å‘é€ç©º Enter å”¤é†’
```

---

## è¯¦ç»†å·¥ä½œæµç¨‹

### ä¸»å¾ªç¯ä¼ªä»£ç 

```python
# Brain çš„å†…éƒ¨é€»è¾‘ï¼ˆæ¦‚å¿µæ€§ï¼‰

tasks = read_tasks_md()
last_output = ""
no_change_count = 0

for task in tasks:
    # 1. å‘é€ä»»åŠ¡
    send_to_worker(f"/plan {task.title}. {task.description}")

    # 2. ç›‘æ§å¾ªç¯
    task_complete = False
    while not task_complete:
        time.sleep(5)  # æ¯ 5 ç§’æ£€æŸ¥ä¸€æ¬¡

        # è¯»å– Worker æœ€å 15 è¡Œè¾“å‡º
        current_output = get_worker_output(lines=15)

        # æ£€æµ‹å˜åŒ–
        if current_output != last_output:
            # è¾“å‡ºå˜åŒ–äº†ï¼Œåˆ†æçŠ¶æ€
            last_output = current_output
            no_change_count = 0

            state = identify_state(current_output)
            action = decide_action(state)

            if action == "run":
                send_to_worker("/run")
            elif action == "clear":
                send_to_worker("/clear")
                record_result(task, "å®Œæˆ")
                task_complete = True
            elif action == "choice_1":
                send_to_worker("1")
            elif action == "yes":
                send_to_worker("y")
            elif action == "continue":
                send_to_worker("continue")
            elif action == "enter":
                send_to_worker("")
        else:
            # è¾“å‡ºæ²¡å˜åŒ–
            no_change_count += 1

            if no_change_count >= 6:  # 30 ç§’æ— å˜åŒ–
                send_to_worker("")  # å‘é€ç©º Enter å”¤é†’
                no_change_count = 0

            if no_change_count >= 60:  # 5 åˆ†é’Ÿè¶…æ—¶
                send_to_worker("/clear")
                record_result(task, "è¶…æ—¶")
                task_complete = True
```

### çŠ¶æ€è½¬æ¢å›¾

```
å‘é€ /plan
    â†“
PLANNING (æ£€æµ‹åˆ° "Planning...")
    â†“
PLAN_READY (æ£€æµ‹åˆ° "Ready" æˆ– "Plan complete")
    â†“ å‘é€ /run
EXECUTING (æ£€æµ‹åˆ° "esc to interrupt" æˆ– "Step X/Y")
    â†“
WAITING_INPUT (æ£€æµ‹åˆ° "(y/n)" æˆ– "é€‰æ‹©")
    â†“ å‘é€ç­”æ¡ˆ
EXECUTING (ç»§ç»­æ‰§è¡Œ)
    â†“
TASK_COMPLETE (æ£€æµ‹åˆ° "All complete")
    â†“ å‘é€ /clear
READY_FOR_NEXT (ä¸‹ä¸€ä¸ªä»»åŠ¡)
```

---

## çŠ¶æ€è¯†åˆ«è§„åˆ™

### å¿«é€ŸåŒ¹é…è§„åˆ™ï¼ˆå…³é”®è¯ï¼‰

```python
def identify_state_fast(output):
    """å¿«é€Ÿå…³é”®è¯åŒ¹é…"""
    output_lower = output.lower()

    # 1. ä»»åŠ¡å®Œæˆï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    if any(word in output_lower for word in [
        "all complete", "all steps complete",
        "æ‰€æœ‰.*å®Œæˆ", "ä»»åŠ¡.*å®Œæˆ"
    ]):
        return "TASK_COMPLETE"

    # 2. Plan å®Œæˆï¼Œå‡†å¤‡è¿è¡Œ
    if any(word in output_lower for word in [
        "ready to execute", "plan complete",
        "å‡†å¤‡.*æ‰§è¡Œ", "è®¡åˆ’.*å®Œæˆ"
    ]):
        return "PLAN_READY"

    # 3. ç­‰å¾…ç¡®è®¤ç»§ç»­
    if any(word in output_lower for word in [
        "continue?", "press enter", "æŒ‰.*ç»§ç»­"
    ]):
        return "NEED_CONTINUE"

    # 4. æ˜¯å¦é—®é¢˜
    if "(y/n)" in output_lower or "yes/no" in output_lower:
        return "YES_NO_QUESTION"

    # 5. é€‰æ‹©é¢˜
    if "é€‰æ‹©" in output or re.search(r'\d+\)', output):
        return "MULTIPLE_CHOICE"

    # 6. æ­£åœ¨æ‰§è¡Œ
    if "esc to interrupt" in output_lower:
        return "EXECUTING"

    # 7. ä¸ç¡®å®šï¼Œéœ€è¦ Claude ç†è§£
    return "UNCERTAIN"
```

### Claude è¯­ä¹‰ç†è§£ï¼ˆå¤‡ç”¨ï¼‰

å½“å…³é”®è¯åŒ¹é…å¤±è´¥æ—¶ï¼ŒBrain (Claude) è‡ªå·±ç†è§£ï¼š

```
ç¤ºä¾‹ 1:
Worker è¾“å‡º: "Do you want to create a backup file?"

Brain æ€è€ƒ:
  è¿™æ˜¯ä¸€ä¸ªè¯¢é—®ï¼Œåœ¨é—®æ˜¯å¦åˆ›å»ºå¤‡ä»½
  æ ¹æ®å¸¸è¯†ï¼Œåˆ›å»ºå¤‡ä»½æ˜¯å¥½çš„
  å†³ç­–: å›ç­” yes

ç¤ºä¾‹ 2:
Worker è¾“å‡º: "Task completed successfully. Waiting for next command."

Brain æ€è€ƒ:
  çœ‹åˆ° "completed successfully"ï¼Œä»»åŠ¡å®Œæˆäº†
  å†³ç­–: å‘é€ /clear
```

---

## é˜²å¡æœºåˆ¶

### æœºåˆ¶ 1ï¼šè¾“å‡ºå˜åŒ–æ£€æµ‹

```
ç›®çš„ï¼šé¿å…æ— æ„ä¹‰çš„é¢‘ç¹æ£€æŸ¥
å®ç°ï¼š
  åªæœ‰å½“è¾“å‡ºå˜åŒ–æ—¶æ‰åˆ†æ
  è¾“å‡ºæ²¡å˜åŒ–æ—¶ç­‰å¾…

å¥½å¤„ï¼š
  - å‡å°‘ Brain çš„è®¡ç®—è´Ÿæ‹…
  - é¿å…é‡å¤åˆ¤æ–­
  - èŠ‚çœ token
```

### æœºåˆ¶ 2ï¼šè¶…æ—¶å”¤é†’

```
è§¦å‘æ¡ä»¶ï¼š30 ç§’è¾“å‡ºæ— å˜åŒ–
å“åº”åŠ¨ä½œï¼šå‘é€ç©º Enter

åŸå› ï¼š
  Worker å¯èƒ½åœ¨ç­‰å¾…è¾“å…¥æäº¤
  å‘é€ç©º Enter å¯èƒ½è§¦å‘æäº¤
```

### æœºåˆ¶ 3ï¼šä»»åŠ¡è¶…æ—¶è·³è¿‡

```
è§¦å‘æ¡ä»¶ï¼š5 åˆ†é’Ÿä»»åŠ¡è¿˜æœªå®Œæˆ
å“åº”åŠ¨ä½œï¼š
  1. è®°å½•ï¼šä»»åŠ¡è¶…æ—¶
  2. å‘é€ /clear æ¸…ç†
  3. ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡

å¥½å¤„ï¼š
  é¿å…ä¸€ä¸ªä»»åŠ¡å¡ä½å¯¼è‡´å…¨éƒ¨åœæ­¢
```

### æœºåˆ¶ 4ï¼šBrain è‡ªèº«é˜²å¡

ä½¿ç”¨å¤–éƒ¨ Python è„šæœ¬ç›‘æ§ Brainï¼š

```python
# brain_monitor.py
while True:
    brain_output = capture_brain()

    # æ£€æµ‹ Brain æ˜¯å¦åœ¨è¿è¡Œ
    has_interrupt = "(esc to interrupt)" in brain_output

    if not has_interrupt:
        # Brain åœæ­¢äº†ï¼Œæ£€æŸ¥å¤šä¹…äº†
        idle_time = time_since_last_change()

        if idle_time > 60:  # 60 ç§’æ²¡åŠ¨
            # æé†’ Brain ç»§ç»­
            send_to_brain("ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥")
            send_to_brain("")  # æäº¤

    time.sleep(10)
```

---

## æ–‡ä»¶ç»“æ„

```
claude-triflow/
â”œâ”€â”€ æ–°æ–¹æ¡ˆ.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ brain_supervisor_prompt.md   # Brain çš„è¶…çº§æç¤ºè¯
â”œâ”€â”€ tasks.md                      # ä»»åŠ¡åˆ—è¡¨ï¼ˆè¾“å…¥ï¼‰
â”œâ”€â”€ task_results.md               # æ‰§è¡Œç»“æœï¼ˆè¾“å‡ºï¼‰
â”œâ”€â”€ start_supervisor.sh           # å¯åŠ¨è„šæœ¬
â””â”€â”€ brain_monitor.py              # Brain é˜²å¡ç›‘æ§ï¼ˆå¯é€‰ï¼‰
```

### tasks.md æ ¼å¼

```markdown
# TriFlow ä»»åŠ¡åˆ—è¡¨

## Task 1: åˆ—å‡º Python æ–‡ä»¶
åˆ—å‡ºå½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„æ‰€æœ‰ .py æ–‡ä»¶ï¼Œç»Ÿè®¡æ€»æ•°ã€‚

## Task 2: åˆ›å»ºæµ‹è¯•æ–‡ä»¶
åˆ›å»ºä¸€ä¸ªåä¸º test_example.py çš„ç®€å•æµ‹è¯•æ–‡ä»¶ï¼ŒåŒ…å«ä¸€ä¸ªæµ‹è¯•å‡½æ•°ã€‚

## Task 3: è¿è¡Œæµ‹è¯•
è¿è¡Œåˆšæ‰åˆ›å»ºçš„æµ‹è¯•æ–‡ä»¶ï¼Œç¡®ä¿æµ‹è¯•é€šè¿‡ã€‚
```

### task_results.md æ ¼å¼ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

```markdown
# ä»»åŠ¡æ‰§è¡Œç»“æœ

æ‰§è¡Œæ—¶é—´ï¼š2025-01-21 12:00:00

## Task 1: åˆ—å‡º Python æ–‡ä»¶
- çŠ¶æ€ï¼šâœ… å®Œæˆ
- å¼€å§‹æ—¶é—´ï¼š12:00:05
- å®Œæˆæ—¶é—´ï¼š12:01:23
- è€—æ—¶ï¼š78 ç§’
- è¾“å‡ºæ‘˜è¦ï¼šFound 12 .py files in the project

## Task 2: åˆ›å»ºæµ‹è¯•æ–‡ä»¶
- çŠ¶æ€ï¼šâœ… å®Œæˆ
- å¼€å§‹æ—¶é—´ï¼š12:01:30
- å®Œæˆæ—¶é—´ï¼š12:02:15
- è€—æ—¶ï¼š45 ç§’
- è¾“å‡ºæ‘˜è¦ï¼šCreated test_example.py with 1 test function

## Task 3: è¿è¡Œæµ‹è¯•
- çŠ¶æ€ï¼šâš ï¸ è¶…æ—¶
- å¼€å§‹æ—¶é—´ï¼š12:02:20
- è¶…æ—¶æ—¶é—´ï¼š12:07:20
- è¯´æ˜ï¼šä»»åŠ¡æ‰§è¡Œè¶…è¿‡ 5 åˆ†é’Ÿï¼Œå·²è·³è¿‡

---
æ€»è®¡ï¼š3 ä¸ªä»»åŠ¡
å®Œæˆï¼š2 ä¸ª
è¶…æ—¶ï¼š1 ä¸ª
å¤±è´¥ï¼š0 ä¸ª
```

---

## å¯åŠ¨æµç¨‹

### æ–¹å¼ 1ï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# æ­¥éª¤ 1ï¼šå‡†å¤‡ä»»åŠ¡æ–‡ä»¶
cat > tasks.md << 'EOF'
## Task 1: æµ‹è¯•ä»»åŠ¡
è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ä»»åŠ¡
EOF

# æ­¥éª¤ 2ï¼šå¯åŠ¨ Worker
tmux new -s claude-worker
claude
# ç­‰å¾… Claude å¯åŠ¨å®Œæˆ

# æ­¥éª¤ 3ï¼šå¯åŠ¨ Brain (åœ¨å¦ä¸€ä¸ªç»ˆç«¯)
tmux new -s claude-brain
claude
# ç­‰å¾… Claude å¯åŠ¨å®Œæˆ

# æ­¥éª¤ 4ï¼šåœ¨ Brain ä¸­ç²˜è´´è¶…çº§æç¤ºè¯
# æ‰“å¼€ brain_supervisor_prompt.md
# å…¨é€‰å¤åˆ¶
# ç²˜è´´åˆ° Brain ç»ˆç«¯
# æŒ‰ä¸¤æ¬¡ Enter æäº¤

# Brain ä¼šè‡ªåŠ¨å¼€å§‹å·¥ä½œï¼
```

### æ–¹å¼ 2ï¼šè„šæœ¬å¯åŠ¨

```bash
./start_supervisor.sh tasks.md
```

è„šæœ¬ä¼šï¼š
1. æ£€æŸ¥å¹¶åˆ›å»º tmux ä¼šè¯
2. å¯åŠ¨ Claude
3. å‘ Brain å‘é€æç¤ºè¯
4. å¯åŠ¨ç›‘æ§è„šæœ¬ï¼ˆå¯é€‰ï¼‰

### æ–¹å¼ 3ï¼šå®Œå…¨è‡ªåŠ¨ï¼ˆåŒ…å«ç›‘æ§ï¼‰

```bash
# å¯åŠ¨ä¸»ç¨‹åº
./start_supervisor.sh tasks.md

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ç›‘æ§
python brain_monitor.py
```

---

## å¸¸è§é—®é¢˜

### Q1ï¼šBrain å¦‚ä½•çŸ¥é“ä½•æ—¶å‘é€ /runï¼Ÿ

**A**ï¼šBrain æ£€æµ‹åˆ° Worker è¾“å‡ºåŒ…å« "Ready" æˆ– "Plan complete" ç­‰å…³é”®è¯ã€‚

---

### Q2ï¼šå¦‚æœ Worker é—®äº†ä¸€ä¸ª Brain ä¸è®¤è¯†çš„é—®é¢˜æ€ä¹ˆåŠï¼Ÿ

**A**ï¼š
1. å…³é”®è¯åŒ¹é…å¤±è´¥
2. Brain (Claude) è‡ªå·±é˜…è¯»é—®é¢˜
3. ç”¨å¸¸è¯†ç†è§£å¹¶å›ç­”
4. å¦‚æœçœŸçš„ä¸çŸ¥é“ï¼Œå‘é€é»˜è®¤ç­”æ¡ˆï¼ˆå¦‚ 1 æˆ– yï¼‰

---

### Q3ï¼šBrain ä¼šä¸ä¼šåœä½ä¸åŠ¨ï¼Ÿ

**A**ï¼šæœ‰ä¸‰å±‚é˜²æŠ¤ï¼š
1. Brain çš„æç¤ºè¯è®¾è®¡ä¸ºæŒç»­å¾ªç¯
2. 30 ç§’æ— è¾“å‡ºå˜åŒ– â†’ å‘é€ç©º Enter
3. å¤–éƒ¨ç›‘æ§è„šæœ¬æ£€æµ‹ Brain å¡ä½ â†’ æé†’ç»§ç»­

---

### Q4ï¼šWorker æ‰§è¡Œå¾ˆæ…¢çš„ä»»åŠ¡æ€ä¹ˆåŠï¼Ÿ

**A**ï¼š
- æ­£å¸¸æƒ…å†µï¼šBrain ä¼šç­‰å¾…ï¼Œåªè¦è¾“å‡ºåœ¨å˜åŒ–å°±ç»§ç»­
- è¶…è¿‡ 5 åˆ†é’Ÿï¼šè‡ªåŠ¨æ ‡è®°ä¸ºè¶…æ—¶ï¼Œè·³è¿‡ç»§ç»­ä¸‹ä¸€ä¸ª

---

### Q5ï¼šå¦‚ä½•è°ƒè¯• Brain çš„åˆ¤æ–­é€»è¾‘ï¼Ÿ

**A**ï¼š
1. é™„åŠ åˆ° Brain ä¼šè¯æŸ¥çœ‹ï¼š`tmux attach -t claude-brain`
2. æŸ¥çœ‹ Brain çš„æ€è€ƒè¿‡ç¨‹
3. æŸ¥çœ‹ task_results.md çš„è®°å½•
4. æŒ‰ Ctrl+B, D åˆ†ç¦»å›åˆ°åŸç»ˆç«¯

---

### Q6ï¼šå¯ä»¥ä¸­é€”å¹²é¢„å—ï¼Ÿ

**A**ï¼šå¯ä»¥ï¼
```bash
# é™„åŠ åˆ° Brain ä¼šè¯
tmux attach -t claude-brain

# æ‰‹åŠ¨è¾“å…¥å‘½ä»¤è¦†ç›– Brain çš„å†³ç­–
# ä¾‹å¦‚ï¼šå¦‚æœ Brain è¦é€‰ 1ï¼Œä½ å¯ä»¥æ‰‹åŠ¨è¾“å…¥ 2

# Ctrl+B, D åˆ†ç¦»ï¼ŒBrain ç»§ç»­å·¥ä½œ
```

---

### Q7ï¼šBrain çš„ token ä¼šä¸ä¼šç”¨å®Œï¼Ÿ

**A**ï¼šBrain éœ€è¦å®šæœŸæ‰§è¡Œè‡ªå·±çš„ `/clear`ã€‚åœ¨æç¤ºè¯ä¸­å¯ä»¥è®¾ç½®ï¼š
```
æ¯å®Œæˆ 5 ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œï¼š
tmux send-keys -t claude-brain "/clear" Enter
```

---

## æŠ€æœ¯ç»†èŠ‚

### è‡ªåŠ¨æäº¤è¾“å…¥

æ‰€æœ‰å‘é€ç»™ Claude çš„å‘½ä»¤éƒ½ç”¨åŒ Enter ç¡®ä¿æäº¤ï¼š

```bash
# æ­£ç¡®æ–¹å¼
tmux send-keys -t claude-worker "/plan Task1" Enter
sleep 0.5
tmux send-keys -t claude-worker Enter  # ç¬¬äºŒä¸ª Enter æäº¤
```

### è¯»å–è¾“å‡º

```bash
# è¯»å–æœ€å 15 è¡Œ
tmux capture-pane -t claude-worker -p | tail -15
```

### çŠ¶æ€æ£€æµ‹ç¤ºä¾‹

```python
# Brain å†…éƒ¨æ‰§è¡Œ Bash å‘½ä»¤
output=$(tmux capture-pane -t claude-worker -p | tail -15)

if echo "$output" | grep -qi "ready"; then
    # å‘é€ /run
    tmux send-keys -t claude-worker "/run" Enter
    sleep 0.5
    tmux send-keys -t claude-worker Enter
fi
```

---

## ä¼˜åŠ¿æ€»ç»“

| ç‰¹æ€§ | æ—§æ–¹æ¡ˆ (Python Bridge) | æ–°æ–¹æ¡ˆ (State-Response Brain) |
|------|----------------------|------------------------------|
| æ§åˆ¶è€… | Python è„šæœ¬ | Claude Brain |
| çŠ¶æ€æ£€æµ‹ | æ­£åˆ™è¡¨è¾¾å¼ | å…³é”®è¯ + Claude ç†è§£ |
| å“åº”èƒ½åŠ› | é¢„å®šä¹‰è§„åˆ™ | æ™ºèƒ½åˆ¤æ–­ + é»˜è®¤ç­–ç•¥ |
| å¯æ‰©å±•æ€§ | ä¿®æ”¹ä»£ç  | ä¿®æ”¹æç¤ºè¯ |
| é˜²å¡æœºåˆ¶ | å•ä¸€è¶…æ—¶ | å¤šå±‚é˜²æŠ¤ |
| è°ƒè¯•éš¾åº¦ | ä¸­ | ä½ï¼ˆå¯ç›´æ¥æŸ¥çœ‹ Brain æ€è€ƒï¼‰ |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä½ |

---

## ä¸‹ä¸€æ­¥

1. âœ… é˜…è¯»æœ¬æ–‡æ¡£ï¼Œç†è§£æ¶æ„
2. â­ï¸ æŸ¥çœ‹ `brain_supervisor_prompt.md` äº†è§£å…·ä½“æç¤ºè¯
3. â­ï¸ å‡†å¤‡ `tasks.md` æ–‡ä»¶
4. â­ï¸ è¿è¡Œ `./start_supervisor.sh` å¯åŠ¨ç³»ç»Ÿ
5. â­ï¸ è§‚å¯Ÿæ‰§è¡Œè¿‡ç¨‹ï¼ŒæŸ¥çœ‹ `task_results.md` ç»“æœ

---

**ç‰ˆæœ¬**ï¼šv1.0
**æ—¥æœŸ**ï¼š2025-01-21
**çŠ¶æ€**ï¼šè®¾è®¡å®Œæˆï¼Œå¾…å®ç°
